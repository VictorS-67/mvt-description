<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movement description</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    
    <!-- External Libraries -->
    
    
</head>

    

    

    
<body class="bg-gray-100">
    
    <div class="container">
        <!-- Header with language selector and logout button -->
        <div class="header-controls">
            <select id="languageSelect" class="language-dropdown">
                <option value="en">English</option>
                <option value="ja">日本語</option>
            </select>
            <button id="buttonLogout" class="button button-small" data-lang="survey.logout_button">Logout</button>
        </div>        
        
        <div class="input-group">
            <p id="nameDisplay"></p>
        </div>

        <!-- Introduction Toggle Section -->
        <div id="introToggleSection" class="intro-toggle-section">
            <button id="introToggleButton" class="button" data-lang="survey.show_introduction">Show Introduction</button>
            <div id="collapsibleIntro" class="intro-section" style="display: none;">
                <div class="intro-text">
                    <h2 id="welcomeTitle" data-lang="welcome.title">Welcome to the Movement to Onomatopoeia Study</h2>
                    <p>
                        <span id="welcomeIntro" data-lang="welcome.introduction">Loading...</span>
                        <br>
                        <span id="welcomeDescription" data-lang="welcome.description">Loading...</span>
                    </p>
                    
                    <h3 id="instructionsTitle" data-lang="instructions.title">What you'll do:</h3>
                    <ul id="instructionsList">
                        <li>Loading...</li>
                    </ul>

                    <p id="noOnomatopoeia" data-lang="additional_info.no_onomatopoeia">Loading...</p>
                    
                    <p>
                        <span id="aboutOnomatopoeia" data-lang="additional_info.about_onomatopoeia">Loading...</span>
                        <strong id="intuitionEmphasis" data-lang="additional_info.intuition_emphasis">Loading...</strong>
                    </p>
                </div>
            </div>
        </div>

        <!-- Video -->
        <p id="videoTitle" data-lang="survey.video_title">Video</p>
        <div class="video-container">
            <video
                id="myVideo"
                src="videos/1.mp4" 
                controls
                title="point light motion"
            >
                <span data-lang="survey.browser_not_supported">Your browser does not support the video tag.</span>
            </video>
        </div>

        <!-- Video Selection Buttons -->
        <div class="video-buttons-container">
            <h3 id="selectVideoTitle" data-lang="survey.select_video_title">Select a video:</h3>
            <div id="videoButtons" class="video-buttons">
                <!-- Buttons will be populated here -->
            </div>
        </div>

        <h3 id="savedOnomatopoeiaTitle" data-lang="survey.saved_onomatopoeia_title">Onomatopoeia already saved for this video:</h3>
        <p id="recordOnomatopoeia">None</p>
        <p id="output"></p>

        <div id="message" class="mt-4 text-gray-700"></div>

        <!-- Onomatopoeia -->
        <div class="input-group">

            <label id="emotionLabel" for="emotionSelect" data-lang="survey.emotion_label">Emotion:</label>
            <select id="emotionSelect" name="emotionSelect" class="emotion-dropdown">
                <option value="" data-lang="survey.emotion_placeholder">Select an emotion</option>
                <option value="joy" data-lang="survey.emotion_options.joy">Joy</option>
                <option value="sadness" data-lang="survey.emotion_options.sadness">Sadness</option>
                <option value="anger" data-lang="survey.emotion_options.anger">Anger</option>
                <option value="surprise" data-lang="survey.emotion_options.surprise">Surprise</option>
                <option value="fear" data-lang="survey.emotion_options.fear">Fear</option>
                <option value="disgust" data-lang="survey.emotion_options.disgust">Disgust</option>
                <option value="contempt" data-lang="survey.emotion_options.contempt">Contempt</option>
            </select>

            <div id="buttonVisibility">
                <p id="questionText" data-lang="survey.question_text">Are there moments in this video that make you think of an onomatopoeia?</p>
                <div class="yes-no-buttons">
                    <button id="hasOnomatopoeiaButtonYes" class="button" data-lang="survey.yes_button">Yes</button>
                    <button id="hasOnomatopoeiaButtonNo" class="button" data-lang="survey.no_button">No</button>
                </div>
            </div>
            <div id ="inputVisibility">
                <p id="step1Text" data-lang="survey.step1_text">1) Please write the onomatopoeia you are thinking of:</p>

                <div class="input-group">
                    <label id="onomatopoeiaLabel" for="onomatopoeiaInput" data-lang="survey.onomatopoeia_label">Onomatopoeia:</label>
                    <textarea id="onomatopoeiaInput" name="onomatopoeiaInput" data-lang="survey.onomatopoeia_placeholder" data-lang-attr="placeholder" placeholder="Write your onomatopoeia"></textarea>
                </div>

                <p id="step2Text" data-lang="survey.step2_text">2) Place the cursor of the video player at where the movement that corresponds to the onomatopoeia begins and press the "Get starting time" button</p>
                <button id="getStart" class="button" data-lang="survey.get_start_button">Get starting time</button>
                <p id="startTimeLabel" data-lang="survey.start_time_label">Onomatopoeia Start Time:</p>
                <p id="startDisplay">-.--</p>

                <p id="step3Text" data-lang="survey.step3_text">3) Place the cursor of the video player at where the movement that corresponds to the onomatopoeia ends and press the "Get ending time" button</p>
                <button id="getEnd" class="button" data-lang="survey.get_end_button">Get ending time</button>
                <p id="endTimeLabel" data-lang="survey.end_time_label">Onomatopoeia End Time:</p>
                <p id="endDisplay">-.--</p>

                <!-- Audio Recording Section -->
                <div id="audioSection" class="audio-section">
                    <p id="audioSectionTitle" data-lang="survey.audio_section_title">4) Optional: Record audio of you pronouncing the onomatopoeia</p>
                    <div class="audio-controls">
                        <button id="audioRecord" class="button audio-button" data-lang="survey.audio_record_button">Start Recording</button>
                        <button id="audioStop" class="button audio-button" style="display: none;" data-lang="survey.audio_stop_button">Stop Recording</button>
                        <button id="audioPlay" class="button audio-button" style="display: none;" data-lang="survey.audio_play_button">Play Recording</button>
                        <button id="audioDelete" class="button audio-button audio-delete" style="display: none;" data-lang="survey.audio_delete_button">Delete Recording</button>
                    </div>
                    <div class="audio-status">
                        <p id="audioStatus" data-lang="survey.audio_status_ready">Ready to record</p>
                        <div id="audioWaveform" class="audio-waveform" style="display: none;">
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                        </div>
                    </div>
                </div>
    
                <button id="saveOnomatopoeia" class="button" data-lang="survey.save_button">Save Onomatopoeia</button>
            </div>
        </div>
        

    </div>

    <!-- Survey Completion Modal -->
    <div id="surveyCompletion" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 id="surveyCompletionTitle" data-lang="survey.completion_title">Congratulations!</h2>
            <p id="surveyCompletionText" data-lang="survey.completion_text">Well done! You have finished all the videos. Thank you for your participation!</p>
            <div class="modal-buttons">
                <button id="stayOnPageButton" class="button" data-lang="survey.stay_on_page">Stay on Page</button>
            </div>
        </div>
    </div>

    <script src="./js/languageManager.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/googleApi.js"></script>
    <script src="./js/googleSheetsService.js"></script>
    <script src="./js/baseApp.js"></script>
    <script src="./js/uiManager.js"></script>
    <script src="./js/loadingManager.js"></script>
    <script src="./js/modalManager.js"></script>
    <script src="./js/videoManager.js"></script>
    <script src="./js/audioRecordingService.js"></script>
    <script src="./js/surveyApp.js"></script>

        
    
</body>
</html>
